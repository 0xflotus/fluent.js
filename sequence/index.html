<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">Home | @fluent/sequence</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Manage ordered sequences of FluentBundles"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@fluent/sequence"><meta property="twitter:description" content="Manage ordered sequences of FluentBundles"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/projectfluent/fluent.js.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mapBundleAsync">mapBundleAsync</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mapBundleSync">mapBundleSync</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="-fluent-sequence">@fluent/sequence</h1><p><code>@fluent/sequence</code> provides mapping functions from string identifiers to
<code>FluentBundle</code> instances taken from synchronous or asynchronous sequences.
It&apos;s part of Project Fluent, a localization framework designed to unleash the
expressive power of the natural language.</p>
<h2 id="installation">Installation</h2><p><code>@fluent/sequence</code> can be used both on the client-side and the server-side.
You can install it from the npm registry or use it as a standalone script (as
the <code>FluentSequence</code> global).</p>
<pre><code><code class="source-code prettyprint">npm install @fluent/sequence</code>
</code></pre><h2 id="how-to-use">How to use</h2><p>An ordered iterable of <code>FluentBundle</code> instances can represent the current
negotiated fallback chain of languages. This iterable can be used to find the
best existing translation for a given identifier.</p>
<p><code>@fluent/sequence</code> provides two mapping functions: <code>mapBundleSync</code>, and
<code>mapBundleAsync</code>. They can be used to find the first <code>FluentBundle</code> in the
given iterable which contains the translation with the given identifier. If
the iterable is ordered according to the result of a language negotiation the
returned <code>FluentBundle</code> contains the best available translation.</p>
<p>A simple function which formats translations based on the identifier might
be implemented as follows:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import {mapBundleSync} from &quot;@fluent/sequence&quot;;

function formatString(id, args) {
    // contexts is a negotiated iterable of FluentBundle instances.
    let ctx = mapBundleSync(contexts, id);

    if (ctx === null) {
        return id;
    }

    let msg = ctx.getMessage(id);
    return ctx.format(msg, args);
}</code>
</code></pre>
<p>When passing a synchronous iterator to <code>mapBundleSync</code>, wrap it in
<code>CachedSyncIterable</code> from the <a href="https://www.npmjs.com/package/cached-iterable"><code>cached-iterable</code></a> package. When passing an
asynchronous iterator to <code>mapBundleAsync</code>, wrap it in <code>CachedAsyncIterable</code>.
This allows multiple calls to <code>mapContext*</code> without advancing and eventually
depleting the iterator.</p>
<p>The API reference is available at
<a href="https://projectfluent.org/fluent.js/sequence">https://projectfluent.org/fluent.js/sequence</a>.</p>
<h2 id="learn-more">Learn more</h2><p>Find out more about Project Fluent at <a href="https://projectfluent.org">projectfluent.org</a>, including
documentation of the Fluent file format (<a href="https://projectfluent.org/fluent/guide/">FTL</a>), links to other packages and
implementations, and information about how to get involved.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
