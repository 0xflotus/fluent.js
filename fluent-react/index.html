<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>fluent-react</h1><p><code>fluent-react</code> provides React bindings for Project Fluent, a localization
framework designed to unleash the expressive power of the natural language.</p>
<h2>Installation</h2><p><code>fluent-react</code> can be used both on the client-side and the server-side.  You
can install it from the npm registry or use it as a standalone script (as the
<code>FluentReact</code> global).</p>
<pre class="prettyprint source"><code>npm install fluent-react</code></pre><h2>How to use</h2><p><code>fluent-react</code> takes advantage of React's Components system and the virtual
DOM.  Translations are stored using the Fluent syntax (<a href="http://projectfluent.io/fluent/guide/">FTL</a>) and exposed to
components via the <em>provider</em> pattern.</p>
<p>An example FTL file might look like the following:</p>
<pre class="prettyprint source"><code>hello-world = Hello, world!
welcome = Welcome, { $username }.</code></pre><h3>The Localized Component</h3><p>Wrap your localizable elements in the <code>Localized</code> component:</p>
<pre class="prettyprint source lang-javascript"><code>import { Localized } from 'fluent-react';

&lt;Localized id=&quot;hello-world&quot;>
    &lt;p>Hello, world!&lt;/p>
&lt;/Localized></code></pre><p>The <code>id</code> prop should be the unique identifier of the translation.  <a href="http://projectfluent.io/fluent/guide/attributes.html">Attributes
defined in the translation</a> will be applied to the wrapped element.</p>
<pre class="prettyprint source"><code>type-name
    .placeholder = Your name</code></pre><pre class="prettyprint source lang-javascript"><code>&lt;Localized id=&quot;type-name&quot;>
    &lt;input
        type=&quot;text&quot;
        placeholder=&quot;Your name&quot;
        onChange={â€¦}
        value={â€¦}
    />
&lt;/Localized></code></pre><p>You can also pass arguments to the translation as <code>$</code>-prefixed props on
<code>Localized</code>:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;Localized id=&quot;welcome&quot; $username={name}>
    &lt;p>{'Welcome, {$username}'}&lt;/p>
&lt;/Localized></code></pre><p>It's recommended that the contents of the wrapped component be a string
expression.  The string will be used as the ultimate fallback if no translation
is available.  It also makes it easy to grep for strings in the source code.
In the future, it may be used for automatic extraction of source copy.</p>
<p>It's also possible to pass React elements as arguments to translations:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;Localized
    id=&quot;welcome&quot;
    $linkA={
        &lt;a href=&quot;http://example.com/A&quot;>A&lt;/a>
    }
    $linkB={
        &lt;Localized id=&quot;link-to-b&quot;>
            &lt;a href=&quot;http://example.com/B&quot;>B&lt;/a>
        &lt;/Localized>
    }>
    &lt;p>{'Click { $linkA } or { $linkB}.'}&lt;/p>
&lt;/Localized></code></pre><h3>The Localization Provider</h3><p>All <code>&lt;Localized&gt;</code> components need access to an instance of the <code>Localization</code>
class, the central localization store to which they subscribe.  The
<code>&lt;LocalizationProvider&gt;</code> component implements the <em>provider</em> pattern known from
Redux.  Taking advantage of React's <a href="https://facebook.github.io/react/docs/context.html">context</a> feature, it makes translations
available to all localized elements in the app without passing them explicitly.</p>
<pre class="prettyprint source lang-javascript"><code>ReactDOM.render(
    &lt;LocalizationProvider messages={â€¦}>
        â€¦
    &lt;/LocalizationProvider>,
    document.getElementById('root')
);</code></pre><p>The <code>LocalizationProvider</code> component takes one prop: <code>messages</code>.  It should be
an iterable of <code>MessageContext</code> instances in order of the user's preferred
languages.  The <code>MessageContext</code> instances will be used by <code>Localization</code> to
format translations.  If a translation is missing in one instance,
<code>Localization</code> will fall back to the next one.</p>
<p>In its simplest form, <code>messages</code> can be an array:</p>
<pre class="prettyprint source lang-javascript"><code>function generateMessages(currentLocales) {
    return currentLocales.map(locale => {
        const cx = new MessageContext(locale);
        cx.addMessages(MESSAGES_ALL[locale]);
        return cx;
    });
}

&lt;LocalizationProvider messages={generateMessages(['en-US'])}>
    â€¦
&lt;/LocalizationProvider>,</code></pre><p>In order to avoid having to create all <code>MessageContext</code> instances for all
locales up front, it's a good idea to make <code>messages</code> an iterator.  The
<code>Localization</code> class will iterate over it (memoizing the items it yields) in
case fallback is required.</p>
<pre class="prettyprint source lang-javascript"><code>export function* generateMessages(currentLocales) {
    for (const locale of currentLocales) {
        const cx = new MessageContext(locale);
        cx.addMessages(MESSAGES_ALL[locale]);
        yield cx;
    }
}

&lt;LocalizationProvider messages={generateMessages(['en-US'])}>
    â€¦
&lt;/LocalizationProvider>,</code></pre><h3>The messages iterable</h3><p>The design of the <code>LocalizationProvider</code> requires a little bit of work from the
developer.  The <code>messages</code> iterable needs to be created manually.  This is
intentional: it gives the most control to the developer with regards to the
following three areas:</p>
<ul>
<li>translations - the developer decides where translations are stored and
how they're fetched,</li>
<li>language negotiation - the developer decides whhich factors are taken into
account for the purpose of the language negotiation, as well as how exactly
it's being done (we recommend <a href="https://github.com/projectfluent/fluent.js/tree/master/fluent-langneg">fluent-langneg</a>),</li>
<li>custom extensions - the developer can pass options to the <code>MessageContext</code>
constructor to configure its bahavior or to define functions available to
translations.</li>
</ul>
<p>In the future we might end up providing ready-made generators of the <code>messages</code>
iterable for the most common scenarios.</p>
<p>One limitation of the current design is that in asynchronous scenarios, all
translations (including any fallback) must be fetched at once before
<code>&lt;LocalizationProvider&gt;</code> is rendered.  See the <code>*-async</code> examples in the
<code>examples/</code> directory for more information.</p>
<p>In the future we might be able to allow async fetching of fallback locales.</p>
<h3>The withLocalization decorator</h3><p>Sometimes it's useful to imperatively format a translation rather than rely on
the declarative <code>&lt;Localized /&gt;</code> API.  Good examples of this are the
<code>window.alert</code> and <code>window.confirm</code> functions.</p>
<p>It's possible to connect any component to its enclosing <code>LocalizationProvider</code>
using the <code>withLocalization</code> higher-order component (HOC).</p>
<pre class="prettyprint source lang-javascript"><code>import { withLocalization } from 'fluent-react/compat';

function HelloButton(props) {
    const { getString } = props;

    return (
        &lt;button onClick={() => alert(getString('hello'))}>
            ðŸ‘‹
        &lt;/button>
    );
}

export default withLocalization(HelloButton);</code></pre><p>The connected component must be a descendant of a <code>LocalizationProvider</code> to
have access to the translations stored there.</p>
<h2>A complete example</h2><pre class="prettyprint source lang-javascript"><code>import 'fluent-intl-polyfill';
import negotiateLanguages from 'fluent-langneg';
import { MessageContext } from 'fluent';
import { LocalizationProvider } from 'fluent-react';

const MESSAGES_ALL = {
    'fr': 'title = Salut le monde !',
    'en-US': 'title = Hello, world!',
    'pl': 'title = Witaj Å›wiecie!'
};

export function* generateMessages(userLocales) {
    // Choose locales that are best for the user.
    const currentLocales = negotiateLanguages(
        userLocales,
        ['fr', 'en-US', 'pl'],
        { defaultLocale: 'en-US' }
    );

    for (const locale of currentLocales) {
        const cx = new MessageContext(locale);
        cx.addMessages(MESSAGES_ALL[locale]);
        yield cx;
    }
}

ReactDOM.render(
    &lt;LocalizationProvider messages={generateMessages(navigator.languages)}>
        &lt;App />
    &lt;/LocalizationProvider>,
    document.getElementById('root')
);</code></pre><p>Consult the <code>examples/</code> directory for examples of how to fetch translations
asynchronously, change languages or integrate with Redux.</p>
<p>All of this is very 0.x and is likely to change. See the <a href="https://github.com/projectfluent/fluent.js/wiki/React-bindings-for-Fluent">wiki</a> for more
discussion.</p>
<h2>Compatibility</h2><p>For legacy browsers, the <code>compat</code> build has been transpiled using the current
version of Babel's <a href="https://babeljs.io/docs/plugins/preset-latest/">latest preset</a>:</p>
<pre class="prettyprint source lang-javascript"><code>import 'fluent-react/compat';</code></pre><p>In some cases, using the <code>compat</code> build may be needed even if you target modern
browsers.  For instance, the <code>create-react-app</code> boilerplate uses UglifyJS to
minify its files.  As of April 2017, UglifyJS doesn't support some of the new
JavaScript syntax features.  By using the <code>compat</code> build of all <code>fluent</code>
packages you can ensure that the minifiction works properly.</p>
<h2>Learn more</h2><p>Find out more about Project Fluent at <a href="http://projectfluent.io">projectfluent.io</a>, including
documentation of the Fluent file format (<a href="http://projectfluent.io/fluent/guide/">FTL</a>), links to other packages and
implementations, and information about how to get involved.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Jun 22 2017 19:47:42 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>